#!/usr/bin/env ยง%python

import h5pyViewer as h
import wx
import os
import argparse
import sys
import logging

logging.basicConfig()


def GetArgs():
    exampleCmd = '/scratch/detectorData/e14472_00033.hdf5'
    parser = argparse.ArgumentParser(
        formatter_class=argparse.RawDescriptionHelpFormatter,
        description=__doc__,
        epilog='Example:\n'+os.path.basename(sys.argv[0])+' '+exampleCmd+'\n ')
    parser.add_argument('hdfFile', nargs='?', help='the hdf5 to show')

    args = parser.parse_args()
            return args


class MyApp(wx.App):

    def OnInit(self):
        args = 'hdf5Files' # GetArgs()
        frame = h.HdfViewerFrame(None, 'h5pyViewer')
        if args.hdfFile:
            frame.OpenFile(args.hdfFile)
        frame.Show(True)
        self.SetTopWindow(frame)
        return True

if __name__ == '__main__':
    print('Hi')
    #------------------ Main Code ----------------------------------
    #redirect stdout/stderr:
    #http://www.blog.pythonlibrary.org/2009/01/01/wxpython-redirecting-stdout-stderr/
    #https://groups.google.com/forum/#!topic/wxpython-users/S9uSKIYdYoo
    #https://17677433047266577941.googlegroups.com/attach/e4d343dc6a751906/REDIRECT.PY?part=2&view=1&vt=ANaJVrFeyCjCMydKnkyfFbYJM7ip07mE-ozUIBxJ5A1QuK1GhycJYJsPTxpAaNk5L2LpXvGhzRPInxDt8_WUcUyK2Ois28Dq8LNebfYoWG9Yxr-tujf5Jk4
    #http://www.wxpython.org/docs/api/wx.PyOnDemandOutputWindow-class.html
    rd=not sys.stdout.isatty()#have a redirect window, if there is no console
    rd=True #force to open a redirect window
    #rd=False #avoid a redirect window
    
    app = MyApp(redirect=rd)
    app.MainLoop()
